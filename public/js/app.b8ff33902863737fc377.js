webpackJsonp([1,0],[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(21),s=n(r),a=o(16),i=n(a),l=o(3),u=n(l),p=o(17),d=n(p),f=o(18),c=n(f),v=o(19),m=n(v),x=o(20);s["default"].use(x);var h=new x;h.map({"/log":{component:d["default"]},"/reg":{component:m["default"]},"/home":{component:u["default"]},"/post":{component:c["default"]}}),h.redirect({"*":"/home"}),h.start(i["default"],"#app")},,,function(e,t,o){var n,r;n=o(5),r=o(12),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),s=n(r),a=o(3),i=(n(a),o(1));n(i);t["default"]={created:function(){var e=localStorage.getItem("token"),t=this,o=(0,s["default"])({access_token:e});e?fetch("http://localhost:3000/user",{method:"POST",headers:{"Content-Type":"application/json","Content-Length":o.length.toString()},body:o}).then(function(e){e.ok?e.json().then(function(e){console.log(e.user.name),t.user=e.user}):t.user=void 0}):this.user=void 0},data:function(){return{user:void 0}},methods:{logOut:function(e){e.preventDefault(),localStorage.removeItem("token"),this.$router.go("/"),window.location.reload()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{user:{},posts:[]}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),s=n(r),a=o(1);n(a);t["default"]={data:function(){return{name:"",password:""}},methods:{handleLog:function(){var e=this,t=(0,s["default"])({name:e.name,password:e.password});fetch("/log",{method:"POST",headers:{"Content-Type":"application/json","Content-Length":t.length.toString()},body:t}).then(function(t){t.ok?t.json().then(function(t){localStorage.setItem("token",t.token),e.user=t.user,e.$router.go("/"),window.location.reload()}):e.user=void 0})}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=n(r);t["default"]={data:function(){return{title:"",content:""}},methods:{handlePost:function(){var e=this;s["default"].ajax({type:"POST",url:"/post",data:{access_token:localStorage.getItem("token"),title:e.title,content:e.content}})}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),s=n(r),a=o(1);n(a);t["default"]={data:function(){return{name:"",password:""}},methods:{handleReg:function(){var e=this,t=(0,s["default"])({name:e.name,password:e.password});fetch("/reg",{method:"POST",headers:{"Content-Type":"application/json","Content-Length":t.length.toString()},body:t}).then(function(t){t.ok?t.json().then(function(t){localStorage.setItem("token",t.token),e.$router.go("/"),window.location.reload()}):e.user=void 0})}}}},,,function(e,t){e.exports=" <div> 这是app,用户{{user.name}} <div> <ul> <li><a v-link=\"'/home'\">home</a></li> <li v-if=user><a v-link=\"'/post'\">发表文章</a></li> <li v-if=!user><a v-link=\"'/reg'\">注册</a></li> <li v-if=!user><a v-link=\"'/log'\">登录</a></li> <li v-if=user><a href=/logout @click=logOut>退出登录</a></li> </ul> </div> <router-view></router-view> </div> "},function(e,t){e.exports=' <div> <h1>首页</h1> <div> <div v-for="post in posts"> <h3>题目:{{post.title}}</h3> <span>作者:{{post.name}}</span> <p>内容:{{post.content}}</p> </div> </div> </div> '},function(e,t){e.exports=" <div> <form> <label for=name>用户名 <input type=text id=name v-model=name /> </label> <label for=key>密码 <input type=password id=key v-model=password /> </label> <input type=button value=登录 @click=handleLog /> </form> </div> "},function(e,t){e.exports=" <div> <form> <label for=title>标题 <input type=text id=title v-model=title /> </label> <label for=content>内容 <input type=textarea id=content v-model=content /> </label> <input type=button value=发表 @click=handlePost /> </form> </div> "},function(e,t){e.exports=" <div> <form> <label for=name>用户名 <input type=text id=name v-model=name /> </label> <label for=key>密码 <input type=password id=key v-model=password /> </label> <input type=button value=注册 @click=handleReg /> </form> </div> "},function(e,t,o){var n,r;n=o(4),r=o(11),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,o){var n,r;n=o(6),r=o(13),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,o){var n,r;n=o(7),r=o(14),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,o){var n,r;n=o(8),r=o(15),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)}]);
//# sourceMappingURL=app.b8ff33902863737fc377.js.map